;---------------------------------------------------------
@CHAR_MAKE, ARG:0 = 0, ARG:1 = 0
#DIM PREG_EXP
#DIM FAMILY_ID
#DIM FAMILY_TARGET
#DIM HAIR_COLOR
#DIM CHARA
#DIM DICE
;---------------------------------------------------------
;ARG:0	性格設定
;	160,자애로움　161,자신만만　162,기가약함　163,고귀함　164,냉철함　165,마을처녀Ａ;マオ専用性格、ユニーク
;	166,악녀　167,하트;ユニーク　168,스페이드;ユニーク　169,다이아;ユニーク　170,클럽;ユニーク
;	171,마을처녀Ｂ;リリィ専用性格、ユニーク　172,두뇌명석　173,비호자,
;ARG:1	種族設定

;	12：人間　1：엘프　2：인랑　3：흡혈귀　4：듀라한　5：드래곤
;	6：천사　7：ダークエルフ　8：堕天使　9：魔族　10：호빗　11：드워프

;ARG:0～ARG:1=999の場合、設定済み
;ARG:0 = 998 の時、ARG:1の確定家族

CHARA = A
FAMILY_TARGET = 0

SIF ARG:1 == 999
	ARG:1 = TALENT:CHARA:종족

IF ARG:0 == 998
	FAMILY_TARGET = ARG:1
	ARG:0 = 0
	ARG:1 = 0
ENDIF

;共通初期値

;레벨・경험치설정
CFLAG:CHARA:9 = 1
EXP:CHARA:80 = 0

;침입계층・침공도・침공중・재기포인트 설정
CFLAG:CHARA:501 = 1
CFLAG:CHARA:502 = 0
CFLAG:CHARA:1 = 2
CFLAG:CHARA:508 = 3

;家族初期化
CFLAG:CHARA:605 = 0

;売春への積極性
CFLAG:CHARA:120 = 1

;男子の可能性
GETBIT FLAG:8,0
SIF RAND:20 == 0 && RESULT == 1
	TALENT:CHARA:122 = 1

;初心者の烙印
SIF DAY:0 <= 60
	TALENT:CHARA:291 = 1

;직업 별 기초 매개 변수

IF TALENT:CHARA:200 == 1 || TALENT:CHARA:205 == 1
	;전사&기사
	CFLAG:CHARA:11 = 20
	CFLAG:CHARA:12 = 20
	CFLAG:CHARA:13 = 20
	CFLAG:CHARA:14 = 20
ELSEIF TALENT:CHARA:201 == 1 || TALENT:CHARA:206 == 1
	;마술사&무녀
	CFLAG:CHARA:11 = 15
	CFLAG:CHARA:12 = 15
	CFLAG:CHARA:13 = 15
	CFLAG:CHARA:14 = 15
ELSEIF TALENT:CHARA:202 == 1 || TALENT:CHARA:207 == 1
	;신관&닌자
	CFLAG:CHARA:11 = 15
	CFLAG:CHARA:12 = 20
	CFLAG:CHARA:13 = 15
	CFLAG:CHARA:14 = 20
ELSEIF TALENT:CHARA:203 == 1 || TALENT:CHARA:208 == 1
	;도적&궁사
	CFLAG:CHARA:11 = 20
	CFLAG:CHARA:12 = 15
	CFLAG:CHARA:13 = 20
	CFLAG:CHARA:14 = 15
ELSE
	;기타
	CFLAG:CHARA:11 = 15
	CFLAG:CHARA:12 = 15
	CFLAG:CHARA:13 = 15
	CFLAG:CHARA:14 = 15
ENDIF

;神官と巫女は治癒を持つ
;戦士と騎士は鼓舞を持つ
IF TALENT:CHARA:202 == 1 || TALENT:CHARA:206 == 1
	TALENT:CHARA:117 = 1
	;高い信仰値を持つ
	CFLAG:CHARA:152 = 20
ELSEIF TALENT:CHARA:200 == 1 || TALENT:CHARA:205 == 1
	TALENT:CHARA:118 = 1
ENDIF

;성격설정
;엘프의 영역、천계、드래곤의 산 클리어 플래그
IF ARG:0 == 999
	;すでに設定されている
ELSEIF ARG:0
	TALENT:CHARA:(ARG:0) = 1
ELSE
	$CHARA_MIND_LOOP
	DICE = RAND:9 + 160

	;ユニークは除外
	SIF DICE == 165
		GOTO CHARA_MIND_LOOP
	
	SIF DICE >= 167
		DICE += 5
	
	IF TALENT:CHARA:122 == 1
		DICE = 174
	ENDIF
	
	TALENT:CHARA:DICE = 1
ENDIF


;処女フラグ
IF TALENT:CHARA:122 == 1
	TALENT:CHARA:0 = 0
	;동정
	IF RAND:3 > 0
		TALENT:CHARA:1 = 1
		CFLAG:CHARA:15 = -1
		CFLAG:CHARA:16 = -1
	ELSE
		CFLAG:CHARA:15 = 0
		CFLAG:CHARA:16 = 0
	ENDIF
ELSEIF FLAG:82 == 1 && RAND:2 == 0
	TALENT:CHARA:0 = 1
	CFLAG:CHARA:16 = -1
ELSEIF RAND:8
	TALENT:CHARA:0 = 1
	CFLAG:CHARA:16 = -1
ENDIF
;処女の場合ファーストキスはまだ
SIF TALENT:CHARA:0 == 1
	CFLAG:CHARA:16 = -1

;처녀의 경우 무작위로 정조 봉인을 걸어둔다.
SIF TALENT:CHARA:0 == 1 && RAND:5 == 0
	TALENT:CHARA:273 = 1

;160,자애로움,
;161,자신만만,
;162,나약함,
;163,고귀함,
;164,냉철함,
;166,악녀,

;10,겁쟁이,;ABL:순종을 올리기 쉽다. PALAM:반감이 오르기 어렵다
;12,굳건함,;명령을 실행하기 어렵다. 매각시 순종이 4LV이상 필요
;14,얌전함,;PALAM:반감이 오르기 어렵다
DICE = RAND:3
;자애로움과 나약함일 때 겁쟁이를 얻음
IF DICE == 0 && (TALENT:CHARA:160 == 1 || TALENT:CHARA:162 == 1)
	TALENT:CHARA:10 = 1
;자신만만과 고귀함 냉철함일 때, 굳건함을 얻음
ELSEIF DICE == 1  && (TALENT:CHARA:161 == 1 || TALENT:CHARA:163 == 1 || TALENT:CHARA:164 == 1 || TALENT:CHARA:166 == 1)
	TALENT:CHARA:12 = 1
;자애로움과 나약함이 있다면 얌전함을 얻음
ELSEIF DICE == 2 && (TALENT:CHARA:160 == 1 || TALENT:CHARA:162 == 1)
	TALENT:CHARA:14 = 1
ENDIF

;11,반항적임,;명령을 실행하기 어려움. 판매 시에 순종 4이상이 필요. PALAM:공순과 욕정이 오르기 쉬움.
;13,솔직함,;명령을 실행하기 쉬움. ABL:순종과 봉사정신을 올리기 쉬움. PALAM:공순이 오르기 쉬움
;16,건방짐,;ABL:순종과 봉사정신을 높이기 어럽다. 
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:11 = 1
	;반항적이라면 일정 확률도 츤데레를 얻음
	SIF RAND:8 == 0
		TALENT:CHARA:18 = 1
ELSEIF DICE == 1
	TALENT:CHARA:13 = 1
;자신만만과 고귀함,냉철함,악녀라면 건방짐을 얻음.
ELSEIF DICE == 2 && (TALENT:CHARA:161 == 1 || TALENT:CHARA:163 == 1 || TALENT:CHARA:164 == 1 || TALENT:CHARA:166 == 1)
	TALENT:CHARA:16 = 1
ENDIF

;15,프라이드높음,;명령을 실행하기 어려움. ABL:기교와 봉사 정신을 높이기 어려움. PALAM:굴복이 오르기 어려움
;17,프라이드낮음,;명령을 실행하기 쉬움. ABL:봉사 정신이 올리기 쉬움. PALAM:굴복이 오르기 쉬움
;18,츤데레,;반항적임을 동시에 가지고 있는 경우、순종4lv 이상으로 반항적→솔직함으로 변경
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:15 = 1
ELSEIF DICE == 1 && TALENT:CHARA:18 == 0
	TALENT:CHARA:17 = 1
ELSEIF DICE == 2 && TALENT:CHARA:18 == 0
	TALENT:CHARA:18 = 1
ENDIF

;20,자제심,;매각시 욕망 4 이상 필요. ABL:봉사 정신을 높이기 어려움. 쾌락계PALAM이 오르기 어려움.
;21,무관심,:ABL:봉사 정신을 높이기 어려움. PALAM:공순、욕정、굴복、공포、반감이 오르기 어려움
;22,감정결여,:ABL:봉사 정신을 높이기 어려움. PALAM가 전체적으로 상승이 어려움.
;23,호기심,;명령을 실행하기 쉬움. PALAM:습득이 오르기 쉬움
;63,헌신적,;봉사계 조교를 실행하기 쉬움. ABL:봉사 정신을 높이기 쉬움. PALAM:굴복이 오르기 쉬움.
DICE = RAND:16
IF DICE == 0
	TALENT:CHARA:21 = 1
ELSEIF DICE == 1
	TALENT:CHARA:23 = 1
ELSEIF DICE == 2
	TALENT:CHARA:22 = 1
ELSEIF DICE == 3
	TALENT:CHARA:20 = 1
ELSEIF DICE == 4
	TALENT:CHARA:63 = 1
ENDIF

;24,보수적,;명령을 실행하기 어려움. ABL:봉사 정신을 높이기 어려움. PALAM:습득이 오르기 어려움
;25,낙관적,;ABL:봉사 정신을 높이기 쉬움. PALAM:억울이 오르기 어려움.
;26,비관적,;ABL:봉사 정신을 높이기 쉬움. PALAM:억울이 오르기 쉬움.
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:24 = 1
ELSEIF DICE == 1
	TALENT:CHARA:25 = 1
ELSEIF DICE == 2
	TALENT:CHARA:26 = 1
ENDIF

;27,일선을 넘지 않음,;모든 ABL을 올리기 어려움
;28,눈에 띄고 싶어함,;명령을 실행하기 쉬움. ABL:노출증이 오르기 쉬움.
DICE = RAND:8
IF DICE == 0
	TALENT:CHARA:27 = 1
ELSEIF DICE == 1
	TALENT:CHARA:28 = 1
ENDIF

;30,정조관념,;애정계 조교의 효과가 낮음. PALAM:반감이 오르기 쉬움.
;31,정조무관심,;애정계 조교의 효과가 낮음. PALAM:반감이 오르기 어려움.
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:30 = 1
ELSEIF DICE == 1
	TALENT:CHARA:31 = 1
ENDIF

;32,억압,;명령을 실행하기 어려움. 매각 때 욕망 4LV이상이 필요함. PALAM:욕정이 오르기 어려움. PALAM:반감이 오르기 쉬움
;33,해방,;ABL:마조끼와 ABL:레즈끼가 오르기 쉬움. PALAM:욕정과 굴복이 오르기 쉬움.
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:32 = 1
ELSEIF DICE == 1
	TALENT:CHARA:33 = 1
ENDIF

;34,저항,;명령을 실행하기 어려움. 매각 때 욕망 4LV이상이 필요함. PALAM:욕정이 오르기 어려움. PALAM:반감이 오르기 쉬움
SIF RAND:12 == 0
	TALENT:CHARA:34 = 1

;35,수줍음,;명령을 실행하기 어려움. 노출계 조교의 효과가 높음.
;36,부끄러움 없음,;노출계 조교의 효과가 낮음.
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:35 = 1
ELSEIF DICE == 1
	TALENT:CHARA:36 = 1
ENDIF

;37,약점,;명령을 실행하기 쉬움
SIF RAND:8 == 0
	TALENT:CHARA:37 = 1

;40,아픔에 약함,;PALAM:공포와 반감이 오르기 쉬움. ABL:마조끼가 있는 경우 SM계 조교로 PALAM:욕정이 오르기 쉬움.
;41,아픔에 강함,;PALAM:공포와 반감이 오르기 어려움
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:40 = 1
ELSEIF DICE == 1
	TALENT:CHARA:41 = 1
ENDIF

;42,젖기 쉬움,;PALAM:윤활이 오르기 쉬움
;43,젖기 어려움,;PALAM:윤활이 오르기 어려움
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:42 = 1
ELSEIF DICE == 1
	TALENT:CHARA:43 = 1
ENDIF

;48,근시,;안경이 어울림
SIF RAND:12 == 0
	TALENT:CHARA:48 = 1

;50,습득빠름,;ABL:봉사정신이 오르기 쉬움. PALAM:습득이 오르기 쉬움
;51,습득느림,;ABL:봉사정신이 오르기 어려움. PALAM:습득이 오르기 어려움
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:50 = 1
ELSEIF DICE == 1
	TALENT:CHARA:51 = 1
ENDIF

;52,혀놀림,;페라계 조교의 효과가 높음
SIF RAND:8 == 0
	TALENT:CHARA:52 = 1

;57,오줌싸개,;방뇨 명령을 항시 사용할 수 있게 됨. 절정 때 방뇨. 
SIF RAND:50 == 0
	TALENT:CHARA:57 = 1

;60,자위하기 쉬움,;자위 관련을 실행하기 쉬움. ABL:자위중독을 올리기 쉬움.
SIF RAND:8 == 0
	TALENT:CHARA:60 = 1

;61,악취 둔감,;페라계 조교를 실행하기 쉬움. ABL:정액 중독이 되기 쉬움.
;62,악취 민감,;페라계 조교를 실행하기 어려움. ABL:정액 중독이 되기 어려움.
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:61 = 1
ELSEIF DICE == 1
	TALENT:CHARA:62 = 1
ENDIF


;70,쾌감에 솔직,;명령을 실행하기 쉬움. ABL:욕망과 봉사 정신이 오르기 쉬움. PALAM:욕정이 오르기 쉬움
;71,쾌감을 부정,;명령을 실행하기 어려움. PALAM:욕정이 오르기 어려움
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:70 = 1
ELSEIF DICE == 1
	TALENT:CHARA:71 = 1
ENDIF

;72,중독되기 쉬움,;ABL:자위중독、정액중독、레즈중독 되기 쉬움
SIF RAND:8 == 0
	TALENT:CHARA:72 = 1

;곧 떨어지는 빈도는 여기를 조작하시오
SIF RAND:30 == 0
	TALENT:CHARA:73 = 1

;80,도착적,;SM계열의 조교가 효과가 높음. ABL이 전체적으로 오르기 쉬움
SIF RAND:8 == 0
	TALENT:CHARA:80 = 1

;81,바이,;레즈 조교를 실행하기 쉬움. ABL:레즈、레즈중독이 되기 쉬움
;82,남성혐오,;남성의 조교가 실행하기 어려움.
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:81 = 1
ELSEIF DICE == 1
	TALENT:CHARA:82 = 1
ENDIF

;20,새드끼
;21,마조끼
DICE = RAND:8
IF DICE == 0
	ABL:CHARA:20 = 3
ELSEIF DICE == 1
	ABL:CHARA:21 = 3
ENDIF

;84,질투,;있는 것만으로도 다른 케릭터의 회복량 감소. 효과는 누적됨
SIF RAND:10 == 0
	TALENT:CHARA:84 = 1

;87,소악마,;조교자일 때 명령을 실행하기 쉬움.
SIF RAND:8 == 0
	TALENT:CHARA:87 = 1

;17,노출증
SIF RAND:40 == 0
	ABL:CHARA:17 = 3

;91,매혹,;조교자일 때 명령을 실행하기 쉬움. 조교자일 때 PALAM이 전체적으로 오르기 쉬움
SIF RAND:20 == 0
	TALENT:CHARA:91 = 1

;99,장신,;PALAM:고통、공포가 오르기 어려움
;100,작은체형,;PALAM:고통、공포가 오르기 쉬움
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:99 = 1
ELSEIF DICE == 1
	TALENT:CHARA:100 = 1
ENDIF

;101,Ｃ둔감,;PALAM:쾌Ｃ가 오르기 어려움
;102,Ｃ민감,;PALAM:쾌Ｃ가 오르기 쉬움
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:101 = 1
ELSEIF DICE == 1
	TALENT:CHARA:102 = 1
ENDIF

;103,Ｖ둔감,;PALAM:쾌Ｖ가 오르기 어려움
;104,Ｖ민감,;PALAM:쾌Ｖ가 오르기 쉬움
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:103 = 1
ELSEIF DICE == 1
	TALENT:CHARA:104 = 1
ENDIF

;105,Ａ둔감,;PALAM:쾌Ａ가 오르기 어려움
;106,Ａ민감,;PALAM:쾌Ａ가 오르기 쉬움
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:105 = 1
ELSEIF DICE == 1
	TALENT:CHARA:106 = 1
ENDIF

;107,Ｂ둔감,;PALAM:쾌Ｂ가 오르기 어려움
;108,Ｂ민감,;PALAM:쾌Ｂ가 오르기 쉬움
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:107 = 1
ELSEIF DICE == 1
	TALENT:CHARA:108 = 1
ENDIF

;119,초유,;【폭유】の上位コンパチ
;114,폭유,;【거유】の上位コンパチ
;116,절벽,;【빈유】の上位（下位？）コンパチ
;109,빈유,;ABL:Ｂ감각을 높이기 쉬움. 가슴관련 조교에 패널티
;110,거유,;ABL:Ｂ감각을 높이기 어려움. 가슴관련 조교에 보너스
IF RAND:50 == 0 && TALENT:CHARA:122 == 0
	TALENT:CHARA:119 = 1
ELSEIF RAND:25 == 0 && TALENT:CHARA:122 == 0
	TALENT:CHARA:114 = 1
ELSEIF RAND:24 == 0 && TALENT:CHARA:122 == 0
	TALENT:CHARA:116 = 1
ELSEIF RAND:8 == 0 && TALENT:CHARA:122 == 0
	TALENT:CHARA:109 = 1
ELSEIF RAND:7 == 0 && TALENT:CHARA:122 == 0
	TALENT:CHARA:110 = 1
ENDIF

;111,회복빠름,;체력 회복량이 많음.
;112,회복느림,;체력 회복량이 적음.
DICE = RAND:12
IF DICE == 0
	TALENT:CHARA:111 = 1
ELSEIF DICE == 1
	TALENT:CHARA:112 = 1
ENDIF

;113,매력,;매각 금액 증가
SIF RAND:8 == 0
	TALENT:CHARA:113 = 1

;121,후타나리,;남자가 아니더라도 SEX계 조교가 가능
IF RAND:80 == 0 && TALENT:CHARA:122 == 0
	TALENT:CHARA:121 = 1
	TALENT:CHARA:1 = 1
ENDIF

;v0.350追加
;140～143,各種コンプレックス,：調教効果が変わる
IF TALENT:CHARA:남자
	;オトコの場合マザコンロリコンが多い
	IF RAND:25 == 0
		TALENT:CHARA:마더콘 = 1
	ELSEIF RAND:24 == 0
		TALENT:CHARA:로리콘 = 1
	ELSEIF RAND:40 == 0
		TALENT:CHARA:파더콘 = 1
	ELSEIF RAND:39 == 0
		TALENT:CHARA:쇼타콘 = 1
	ENDIF
ELSEIF TALENT:CHARA:후타나리
	;ふたなりの場合ニュートラル
	IF RAND:30 == 0
		TALENT:CHARA:마더콘 = 1
	ELSEIF RAND:29 == 0
		TALENT:CHARA:로리콘 = 1
	ELSEIF RAND:28 == 0
		TALENT:CHARA:파더콘 = 1
	ELSEIF RAND:27 == 0
		TALENT:CHARA:쇼타콘 = 1
	ENDIF
ELSE
	;それ以外の場合ファザコンショタコンが多い
	IF RAND:25 == 0
		TALENT:CHARA:파더콘 = 1
	ELSEIF RAND:24 == 0
		TALENT:CHARA:쇼타콘 = 1
	ELSEIF RAND:40 == 0
		TALENT:CHARA:마더콘 = 1
	ELSEIF RAND:39 == 0
		TALENT:CHARA:로리콘 = 1
	ENDIF
ENDIF

;157,유부녀,;欲望が上がりやすくなります
IF RAND:12 == 0 && TALENT:CHARA:122 == 0
	TALENT:CHARA:157 = 1
	TALENT:CHARA:0 = 0
ENDIF

;290,보증인,;借金が増えていきます
IF TALENT:CHARA:37 && RAND:4 == 0
	;弱味があると保証人である確率が高いです
	TALENT:CHARA:290 = 1
ELSEIF RAND:12 == 0
	TALENT:CHARA:290 = 1
ENDIF

;カルマ
CFLAG:CHARA:151 = RAND:200

;전투가능
;전술;LVUP時にステータスにボーナス
SIF RAND:40 == 0
	TALENT:CHARA:240 = 1
;마술;魔法を使用できる
SIF RAND:40 == 0
	TALENT:CHARA:241 = 1
;법술;回復魔法を使用できる. また信仰の証
SIF RAND:40 == 0
	TALENT:CHARA:242 = 1
;기습;先手確率UP・先手時に攻撃にボーナス
SIF RAND:40 == 0
	TALENT:CHARA:243 = 1

;근육질・허약
IF RAND:30 == 0
	TALENT:CHARA:248 = 1
ELSEIF RAND:29 == 0
	TALENT:CHARA:256 = 1
ENDIF

;철벽;ピンチ時にステータス回復
SIF RAND:40 == 0
	TALENT:CHARA:249 = 1
;저주술;呪術系魔法を使用できる
SIF RAND:40 == 0
	TALENT:CHARA:250 = 1
;인술;攻撃力に戦闘ダメージを受けない
SIF RAND:40 == 0
	TALENT:CHARA:251 = 1
;선제;戦闘前に追加攻撃
SIF RAND:40 == 0
	TALENT:CHARA:252 = 1

;갈색이라든가 백옥이라든가
IF RAND:12 == 0
	TALENT:CHARA:253 = 1
ELSEIF RAND:11 == 0
	TALENT:CHARA:255 = 1
ENDIF

;마법내성
SIF RAND:40 == 0
	TALENT:CHARA:257 = 1
;걸음빠름
SIF RAND:40 == 0
	TALENT:CHARA:258 = 1

;隻眼とか額の眼とか
IF RAND:60 == 0
	TALENT:CHARA:259 = 1
ELSEIF RAND:59 == 0
	TALENT:CHARA:260 = 1
ENDIF

;能力者技能

;화염의능력자
SIF RAND:40 == 0
	TALENT:CHARA:275 = 1
;얼음의능력자
SIF RAND:40 == 0
	TALENT:CHARA:276 = 1
;번개의능력자
SIF RAND:40 == 0
	TALENT:CHARA:277 = 1
;빛의능력자
SIF RAND:40 == 0
	TALENT:CHARA:278 = 1
;어둠의능력자
SIF RAND:40 == 0
	TALENT:CHARA:279 = 1

;額の目の場合、闇チャンス2回目
SIF TALENT:CHARA:260 == 1 && RAND:40 == 0
	TALENT:CHARA:279 = 1

TARGET = CHARA
CALL LOOK_SET, ARG:1
TARGET = -1

;백보지
IF RAND:20 == 0
	TALENT:CHARA:125 = 1
	TALENT:CHARA:310 = 1
	TALENT:CHARA:311 = 1
ENDIF

;이름의 설정
IF TALENT:CHARA:122
	;男子はランダムネーム
	;そのうち洋名和名も追加したい
	CALL RANDOM_NAME,3, CHARA
ELSE
	CALL RANDOM_NAME,0, CHARA
ENDIF

;家族設定
;設定に名前を使用するので、家族設定より先に
;名前を設定しておくこと
IF RAND:10 == 0 && FAMILY_TARGET == 0
	CALL SET_FAMILY_LINK, CHARA, FAMILY_TARGET
ELSEIF FAMILY_TARGET > 0
	CALL SET_FAMILY_LINK, CHARA, FAMILY_TARGET
ENDIF

IF FLAG:60 > 0 && FLAG:402 == 0
	REPEAT FLAG:60
		CALL ST_UP, CHARA
	REND
ENDIF
BASE:CHARA:0 = MAXBASE:CHARA:0
BASE:CHARA:1 = MAXBASE:CHARA:1

;家族の身体的特徴が遺伝
LOCAL = CFLAG:CHARA:605
LOCAL:1 = LOCAL % 10
CALL SEARCH_FAMILY, CHARA
FAMILY_ID = RESULT

IF FAMILY_ID > 0
	;家族が15歳未満
	IF CFLAG:FAMILY_ID:451 < 15
		;大柄なら体格を一段階大さくする
		IF TALENT:FAMILY_ID:장신 && RAND:3 == 0
			IF TALENT:CHARA:작은체형
				TALENT:CHARA:작은체형 = 0
			ELSE
				TALENT:CHARA:장신 = 1
			ENDIF
		ENDIF

		;巨乳以上なら乳を一段階大さくする
		IF ((TALENT:FAMILY_ID:거유 && RAND:4) || (TALENT:FAMILY_ID:폭유 && RAND:2) || (TALENT:FAMILY_ID:초유) == 0) && TALENT:CHARA:122 == 0
			IF TALENT:CHARA:절벽
				TALENT:CHARA:절벽 = 0
				TALENT:CHARA:빈유 = 1
			ELSEIF TALENT:CHARA:빈유
				TALENT:CHARA:빈유 = 0
			ELSEIF (TALENT:CHARA:거유 == 0 && TALENT:CHARA:폭유 == 0 && TALENT:CHARA:초유 == 0)
				TALENT:CHARA:거유 = 1
			ELSEIF TALENT:CHARA:거유
				TALENT:CHARA:거유 = 0
				TALENT:CHARA:폭유 = 1
			ELSE
				TALENT:CHARA:폭유 = 0
				TALENT:CHARA:초유 = 1
			ENDIF
		ENDIF
	;家族が18歳以上
	ELSEIF CFLAG:FAMILY_ID:451 > 17
		;小柄体型なら体格を一段階小さくする
		IF TALENT:FAMILY_ID:작은체형 && RAND:3 == 0
			IF TALENT:CHARA:장신
				TALENT:CHARA:장신 = 0
			ELSE
				TALENT:CHARA:작은체형 = 1
			ENDIF
		ENDIF

		;貧乳以下なら階乳を一段小さくする
		IF ((TALENT:FAMILY_ID:빈유 && RAND:4) || (TALENT:FAMILY_ID:절벽 && RAND:2) == 0) && TALENT:CHARA:122 == 0
			IF TALENT:CHARA:초유
				TALENT:CHARA:초유 = 0
				TALENT:CHARA:폭유 = 1
			ELSEIF TALENT:CHARA:폭유
				TALENT:CHARA:폭유 = 0
				TALENT:CHARA:거유 = 1
			ELSEIF TALENT:CHARA:거유
				TALENT:CHARA:거유 = 0
			ELSEIF (TALENT:CHARA:빈유 == 0 && TALENT:CHARA:절벽 == 0)
				TALENT:CHARA:빈유 = 1
			ELSE
				TALENT:CHARA:빈유 = 0
				TALENT:CHARA:절벽 = 1
			ENDIF
		ENDIF
	ENDIF

	IF (TALENT:FAMILY_ID:근육질 || TALENT:FAMILY_ID:허약) && RAND:3 == 0
		TALENT:CHARA:근육질 = TALENT:FAMILY_ID:근육질
		TALENT:CHARA:허약 = TALENT:FAMILY_ID:허약
	ENDIF

	IF (TALENT:FAMILY_ID:갈색피부 || TALENT:FAMILY_ID:하얀피부) && RAND:2 == 0
		TALENT:CHARA:갈색피부 = TALENT:FAMILY_ID:갈색피부
		TALENT:CHARA:하얀피부 = TALENT:FAMILY_ID:하얀피부
	ENDIF

	SIF TALENT:FAMILY_ID:이마에눈 && RAND:3 == 0
		TALENT:CHARA:이마에눈 = TALENT:FAMILY_ID:이마에눈

	;家族と「近い色」の髪になる可能性が高い
	;銀 金 赤 栗 緑 青 黒の順
	IF RAND:5 != 0
		IF TALENT:FAMILY_ID:머리색 == 1
			HAIR_COLOR =120
		ELSEIF TALENT:FAMILY_ID:머리색 == 2
			HAIR_COLOR =140
		ELSEIF TALENT:FAMILY_ID:머리색 == 3
			HAIR_COLOR =170
		ELSEIF TALENT:FAMILY_ID:머리색 == 4
			HAIR_COLOR =130
		ELSEIF TALENT:FAMILY_ID:머리색 == 5
			HAIR_COLOR =110
		ELSEIF TALENT:FAMILY_ID:머리색 == 6
			HAIR_COLOR =160
		ELSEIF TALENT:FAMILY_ID:머리색 == 7
			HAIR_COLOR =150
		ENDIF
		HAIR_COLOR = HAIR_COLOR - 20 + RAND:9 + RAND:9 + RAND:9 + RAND:9 + RAND:9
		IF HAIR_COLOR > 170
			TALENT:CHARA:머리색 = 3
		ELSEIF HAIR_COLOR > 160
			TALENT:CHARA:머리색 = 6
		ELSEIF HAIR_COLOR > 150
			TALENT:CHARA:머리색 = 7
		ELSEIF HAIR_COLOR > 140
			TALENT:CHARA:머리색 = 2
		ELSEIF HAIR_COLOR > 130
			TALENT:CHARA:머리색 = 4
		ELSEIF HAIR_COLOR > 120
			TALENT:CHARA:머리색 = 1
		ELSE
			TALENT:CHARA:머리색 = 5
		ENDIF
	ENDIF

	SIF RAND:5 != 0
		TALENT:CHARA:눈동자색 = TALENT:FAMILY_ID:눈동자색

	SIF RAND:3 == 0
		TALENT:CHARA:살집 = TALENT:FAMILY_ID:살집

	SIF RAND:3 == 0
		TALENT:CHARA:유두 = TALENT:FAMILY_ID:유두

	IF RAND:3 == 0
		TALENT:CHARA:음모의상태 = TALENT:FAMILY_ID:음모의상태
		TALENT:CHARA:음모생육한계 = TALENT:FAMILY_ID:음모생육한계
	ENDIF
ENDIF
;--------------------
;각종경험
;--------------------

;출산경험
PREG_EXP = 0
LOCAL = TALENT:CHARA:320 % 10
IF LOCAL == 0 && TALENT:CHARA:157 == 1 && RAND:2 == 0
	PREG_EXP += RAND:3
ELSE
	;娘の数
	LOCAL:1 = TALENT:CHARA:320 % 1000
	PREG_EXP += LOCAL:1 / 100
	;息子の数
	LOCAL:1 = TALENT:CHARA:320 % 10000
	PREG_EXP += LOCAL:1 / 1000
ENDIF

SIF TALENT:CHARA:122
	PREG_EXP = 0

EXP:CHARA:60 += PREG_EXP

;성교경험
IF TALENT:CHARA:122 && TALENT:CHARA:1
	;童貞のオトコ
ELSEIF TALENT:CHARA:122 && TALENT:CHARA:1 == 0
	;非童貞のオトコ
	EXP:CHARA:5 = RAND:8 + 1 + PREG_EXP
ELSEIF TALENT:CHARA:0 == 0
	EXP:CHARA:0 = RAND:8 + 1 + PREG_EXP
	EXP:CHARA:5 = EXP:CHARA:0
ELSEIF PREG_EXP
	;処女であるのに出産経験がある
	EXP:CHARA:0 = RAND:4 + 1 + PREG_EXP
	EXP:CHARA:5 = EXP:CHARA:0
	;処女を消す
	TALENT:CHARA:0 = 0
ENDIF


;자위경험
IF RAND:30 == 0
	;たまに猿みたいなオナニストが出現
	EXP:CHARA:10 = RAND:50
ELSEIF TALENT:CHARA:121 == 1 || TALENT:CHARA:122 == 1
	;후타나리・オトコは自慰しちゃうよね
	EXP:CHARA:10 = RAND:30
ELSEIF TALENT:CHARA:60 == 1
	;자위쉬움
	EXP:CHARA:10 = RAND:20
ELSEIF RAND:10 == 0
	;比較的自慰しちゃってる
	EXP:CHARA:10 = RAND:10
ENDIF

;ただしカルマが高いと自慰なんてしない
SIF CFLAG:CHARA:151 > 150
	EXP:CHARA:10 = 0

;オトコにV経験はない
SIF TALENT:CHARA:122
	EXP:CHARA:0 = 0
	

;初体験
CALL CHARA_FIRST_EXP, CHARA

;의상
A = CHARA
CALL SET_CHAR_CLOTH

;一人称の設定
CALL RANDOM_SELF_CALL, CHARA

;年齢or身長などを表示する設定の場合は身体データを設定
IF GETBIT(FLAG:5,12) || GETBIT(FLAG:5,15)
;마을처녀Ａ・Ｂのみ年齢を指定してみる
	IF TALENT:CHARA:165
		CALL CHAR_SIZE_GENERATE, CHARA, RAND:2 + 12
	ELSEIF TALENT:CHARA:171
		CALL CHAR_SIZE_GENERATE, CHARA, RAND:2 + 17
	ELSE
		CALL CHAR_SIZE_GENERATE, CHARA
	ENDIF
	CFLAG:(CHARA):451 = RESULT:0
	CFLAG:(CHARA):452 = RESULT:1
	CFLAG:(CHARA):453 = RESULT:2
	CFLAG:(CHARA):454 = RESULT:3
	CFLAG:(CHARA):455 = RESULT:4
	CFLAG:(CHARA):456 = RESULT:5
	CFLAG:(CHARA):457 = RESULT:6
ENDIF


RETURN CHARA


;--------------------------------------
@RANDOM_NAME, ARG,CHARA
#DIM EUR_NUM
#DIM WA_NUM
#DIM NAME_TYPE
#DIM FAMILY_ID
#DIM N_LENGTH
#DIM CHARA
;--------------------------------------
;NAME_TYPE	名前の種類
;		0：指定なし　1：英名　2：和名　3：ランダム生成
;N_LENGTH	ランダム生成長さ
;CHARA	キャラID

;eraWIZ를 참고. A는 케릭터 No
;외국명 패턴 수
EUR_NUM = 143
;일본명 패턴 수
WA_NUM = 128

$NAME_NUM

NAME_TYPE = 0
SIF ARG
	NAME_TYPE = ARG

;家族の名前の種類を継承
LOCAL = CFLAG:CHARA:605
LOCAL:1 = LOCAL % 10
CALL SEARCH_FAMILY, CHARA
FAMILY_ID = RESULT

IF RAND:5 != 0 && FAMILY_ID > 0 && NAME_TYPE == 0
	;家族が洋名
	IF CFLAG:FAMILY_ID:6 < 200
		NAME_TYPE = 1
	;家族が生成名
	ELSEIF CFLAG:FAMILY_ID:6 > 1000000000
		NAME_TYPE = 3
	;家族が和名
	ELSE
		NAME_TYPE = 2
	ENDIF
ENDIF

;職業によって名前の種類に偏りを持たせる
IF TALENT:CHARA:기사 && RAND:10 != 0 && NAME_TYPE == 0
	NAME_TYPE = 1
ELSEIF (TALENT:CHARA:무녀 || TALENT:CHARA:닌자) && RAND:4 != 0 && NAME_TYPE == 0
	NAME_TYPE = 2
ENDIF

;種族によって名前の種類に偏りを持たせる
IF RAND:3 == 0 && NAME_TYPE == 0
	;人間	指定なし
	IF CFLAG:CHARA:314 == 0
		NAME_TYPE = 0
	;엘프	洋名
	ELSEIF CFLAG:CHARA:314 == 1
		NAME_TYPE = 1
	;인랑	和名
	ELSEIF CFLAG:CHARA:314 == 2
		NAME_TYPE = 2
	;흡혈귀	洋名
	ELSEIF CFLAG:CHARA:314 == 3
		NAME_TYPE = 1
	;듀라한	洋名
	ELSEIF CFLAG:CHARA:314 == 4
		NAME_TYPE = 1
	;드래곤	生成名
	ELSEIF CFLAG:CHARA:314 == 5
		NAME_TYPE = 3
	;천사	洋名
	ELSEIF CFLAG:CHARA:314 == 6
		NAME_TYPE = 1
	;ダークエルフ	洋名
	ELSEIF CFLAG:CHARA:314 == 7
		NAME_TYPE = 1
	;堕天使	洋名
	ELSEIF CFLAG:CHARA:314 == 8
		NAME_TYPE = 1
	;魔族	指定なし
	ELSEIF CFLAG:CHARA:314 == 9
	;호빗	生成名
	ELSEIF CFLAG:CHARA:314 == 10
		NAME_TYPE = 3
	;드워프	生成名
	ELSEIF CFLAG:CHARA:314 == 11
		NAME_TYPE = 3
	;その他　必要ないと思うけど指定なし
	ELSE
		NAME_TYPE = 0
	ENDIF
ENDIF

IF NAME_TYPE == 1 || (NAME_TYPE == 0 && RAND:4 == 0)
	CFLAG:CHARA:6 = RAND:EUR_NUM
ELSEIF NAME_TYPE == 2 || (NAME_TYPE == 0 && RAND:2)
	CFLAG:CHARA:6 = RAND:WA_NUM + 200
ELSE
	N_LENGTH = 3 - RAND:2 - RAND:3 % 2
	CFLAG:CHARA:6 = 0
	REPEAT N_LENGTH
		CFLAG:CHARA:6 *= 1000
		;終端にのみ使える文字列かどうか
		IF COUNT == 0 && N_LENGTH > 1 && RAND:5 != 0
			M = 2
		ELSE
			M = 1
		ENDIF

		IF M == 1
			IF (RAND:3 == 0 && N_LENGTH != 1) || (RAND:2 == 0 && N_LENGTH == 3)
				N = RAND:9 + 300
			ELSE
				N = RAND:30 + 200
			ENDIF
		ELSE
			IF RAND:8 == 0 && N_LENGTH != 1
				N = RAND:2 + 500
			ELSE
				N = RAND:27 + 400
			ENDIF
		ENDIF
		CFLAG:CHARA:6 += N
		SIF COUNT < 0
			BREAK
		SIF N_LENGTH == 1 && (N == 200 || N == 201 || N == 204 || N == 205 || N == 207 || N == 208 || N == 210 || N == 215 || N == 217 || N == 218 || N == 219 || N == 227)
			COUNT -= 10
	REND
	CFLAG:CHARA:6 += 2000000000
ENDIF

IF CHARANUM < (EUR_NUM + WA_NUM) * 4 /10
	REPEAT CHARANUM
		SIF COUNT == CHARA
			CONTINUE
		SIF CFLAG:COUNT:6 == CFLAG:CHARA:6
			GOTO NAME_NUM
	REND
ENDIF

CALL NAMING, CHARA

;--------------------------------------
@NAMING,CHARA
#DIM CHARA
#DIM NAME_ID
#DIM NAME_RAND_ID,2
;--------------------------------------
;유저의 설정 이름
IF CFLAG:CHARA:420 != 0
	SAVESTR:CHARA = %CSTR:CHARA:1%
	RETURN 0
ENDIF

;ユニークの固有名を設定
IF TALENT:CHARA:마을처녀Ａ
	SAVESTR:CHARA = 마오
	RETURN 0
ELSEIF TALENT:CHARA:하트
	SAVESTR:CHARA = 골드하트
	RETURN 0
ELSEIF TALENT:CHARA:스페이드
	SAVESTR:CHARA = 실버스페이드
	RETURN 0
ELSEIF TALENT:CHARA:다이아
	SAVESTR:CHARA = 블랙다이아
	RETURN 0
ELSEIF TALENT:CHARA:클럽
	SAVESTR:CHARA = 화이트클럽
	RETURN 0
ELSEIF TALENT:CHARA:마을처녀Ｂ
	SAVESTR:CHARA = 릴리
	RETURN 0
ENDIF


;이름 결정
NAME_ID = CFLAG:CHARA:6

IF NAME_ID < 1000000000
	IF NAME_ID == 0
		SAVESTR:CHARA = 메리
	ELSEIF NAME_ID == 1
		SAVESTR:CHARA = 소피아
	ELSEIF NAME_ID == 2
		SAVESTR:CHARA = 안나
	ELSEIF NAME_ID == 3
		SAVESTR:CHARA = 실비아
	ELSEIF NAME_ID == 4
		SAVESTR:CHARA = 카티아
	ELSEIF NAME_ID == 5
		SAVESTR:CHARA = 에리
	ELSEIF NAME_ID == 6
		SAVESTR:CHARA = 미쉘
	ELSEIF NAME_ID == 7
		SAVESTR:CHARA = 엘렌
	ELSEIF NAME_ID == 8
		SAVESTR:CHARA = 에티카
	ELSEIF NAME_ID == 9
		SAVESTR:CHARA = 아리스
	ELSEIF NAME_ID == 10
		SAVESTR:CHARA = 프랑소와즈
	ELSEIF NAME_ID == 11
		SAVESTR:CHARA = 엘렉트라
	ELSEIF NAME_ID == 12
		SAVESTR:CHARA = 그레이스
	ELSEIF NAME_ID == 13
		SAVESTR:CHARA = 제시카
	ELSEIF NAME_ID == 14
		SAVESTR:CHARA = 레이아
	ELSEIF NAME_ID == 15
		SAVESTR:CHARA = 레베카
	ELSEIF NAME_ID == 16
		SAVESTR:CHARA = 벨베트
	ELSEIF NAME_ID == 17
		SAVESTR:CHARA = 릴리
	ELSEIF NAME_ID == 18
		SAVESTR:CHARA = 예카테리나
	ELSEIF NAME_ID == 19
		SAVESTR:CHARA = 아가사
	ELSEIF NAME_ID == 20
		SAVESTR:CHARA = 아멜리아
	ELSEIF NAME_ID == 21
		SAVESTR:CHARA = 안젤리카
	ELSEIF NAME_ID == 22
		SAVESTR:CHARA = 브리짓
	ELSEIF NAME_ID == 23
		SAVESTR:CHARA = 크리스티나
	ELSEIF NAME_ID == 24
		SAVESTR:CHARA = 클로디아
	ELSEIF NAME_ID == 25
		SAVESTR:CHARA = 쉐릴
	ELSEIF NAME_ID == 26
		SAVESTR:CHARA = 쉐리
	ELSEIF NAME_ID == 27
		SAVESTR:CHARA = 세실리아
	ELSEIF NAME_ID == 28
		SAVESTR:CHARA = 베라
	ELSEIF NAME_ID == 29
		SAVESTR:CHARA = 베키
	ELSEIF NAME_ID == 30
		SAVESTR:CHARA = 에이브릴
	ELSEIF NAME_ID == 31
		SAVESTR:CHARA = 도로시
	ELSEIF NAME_ID == 32
		SAVESTR:CHARA = 에밀리
	ELSEIF NAME_ID == 33
		SAVESTR:CHARA = 펠리시아
	ELSEIF NAME_ID == 34
		SAVESTR:CHARA = 프란시스카
	ELSEIF NAME_ID == 35
		SAVESTR:CHARA = 글로리아
	ELSEIF NAME_ID == 36
		SAVESTR:CHARA = 제니퍼
	ELSEIF NAME_ID == 37
		SAVESTR:CHARA = 마가렛
	ELSEIF NAME_ID == 38
		SAVESTR:CHARA = 올리비아
	ELSEIF NAME_ID == 39
		SAVESTR:CHARA = 베로니카
	ELSEIF NAME_ID == 40
		SAVESTR:CHARA = 세라피나
	ELSEIF NAME_ID == 41
		SAVESTR:CHARA = 플로라
	ELSEIF NAME_ID == 42
		SAVESTR:CHARA = 타바사
	ELSEIF NAME_ID == 43
		SAVESTR:CHARA = 에이다
	ELSEIF NAME_ID == 44
		SAVESTR:CHARA = 캐롤
	ELSEIF NAME_ID == 45
		SAVESTR:CHARA = 샤를로트
	ELSEIF NAME_ID == 46
		SAVESTR:CHARA = 코델리아
	ELSEIF NAME_ID == 47
		SAVESTR:CHARA = 에밀리아
	ELSEIF NAME_ID == 48
		SAVESTR:CHARA = 에리카
	ELSEIF NAME_ID == 49
		SAVESTR:CHARA = 이브
	ELSEIF NAME_ID == 50
		SAVESTR:CHARA = 헨리에타
	ELSEIF NAME_ID == 51
		SAVESTR:CHARA = 아이리스
	ELSEIF NAME_ID == 52
		SAVESTR:CHARA = 아이비
	ELSEIF NAME_ID == 53
		SAVESTR:CHARA = 루이즈
	ELSEIF NAME_ID == 54
		SAVESTR:CHARA = 리디아
	ELSEIF NAME_ID == 55
		SAVESTR:CHARA = 메이벨
	ELSEIF NAME_ID == 56
		SAVESTR:CHARA = 나탈리아
	ELSEIF NAME_ID == 57
		SAVESTR:CHARA = 니나
	ELSEIF NAME_ID == 58
		SAVESTR:CHARA = 노라
	ELSEIF NAME_ID == 59
		SAVESTR:CHARA = 패트리시아
	ELSEIF NAME_ID == 60
		SAVESTR:CHARA = 피리스
	ELSEIF NAME_ID == 61
		SAVESTR:CHARA = 레이첼
	ELSEIF NAME_ID == 62
		SAVESTR:CHARA = 로즈마리
	ELSEIF NAME_ID == 63
		SAVESTR:CHARA = 스칼렛
	ELSEIF NAME_ID == 64
		SAVESTR:CHARA = 샤리
	ELSEIF NAME_ID == 65
		SAVESTR:CHARA = 스텔라
	ELSEIF NAME_ID == 66
		SAVESTR:CHARA = 수지
	ELSEIF NAME_ID == 67
		SAVESTR:CHARA = 베네사
	ELSEIF NAME_ID == 68
		SAVESTR:CHARA = 웬디
	ELSEIF NAME_ID == 69
		SAVESTR:CHARA = 안네리제
	ELSEIF NAME_ID == 70
		SAVESTR:CHARA = 비앙카
	ELSEIF NAME_ID == 71
		SAVESTR:CHARA = 코르넬리아
	ELSEIF NAME_ID == 72
		SAVESTR:CHARA = 쥴리아
	ELSEIF NAME_ID == 73
		SAVESTR:CHARA = 에레오노라
	ELSEIF NAME_ID == 74
		SAVESTR:CHARA = 엘프리데
	ELSEIF NAME_ID == 75
		SAVESTR:CHARA = 리젤로테
	ELSEIF NAME_ID == 76
		SAVESTR:CHARA = 빌헬르미나
	ELSEIF NAME_ID == 77
		SAVESTR:CHARA = 아나스타샤
	ELSEIF NAME_ID == 78
		SAVESTR:CHARA = 클로에
	ELSEIF NAME_ID == 79
		SAVESTR:CHARA = 오리가
	ELSEIF NAME_ID == 80
		SAVESTR:CHARA = 쿠델리아
	ELSEIF NAME_ID == 81
		SAVESTR:CHARA = 샤를롯테
	ELSEIF NAME_ID == 82
		SAVESTR:CHARA = 엘다

;20151225追加分
	ELSEIF NAME_ID == 83
		SAVESTR:CHARA = 아이리스
	ELSEIF NAME_ID == 84
		SAVESTR:CHARA = 아이린
	ELSEIF NAME_ID == 85
		SAVESTR:CHARA = 아리시아
	ELSEIF NAME_ID == 86
		SAVESTR:CHARA = 안젤린느
	ELSEIF NAME_ID == 87
		SAVESTR:CHARA = 잉그리드
	ELSEIF NAME_ID == 88
		SAVESTR:CHARA = 비비안
	ELSEIF NAME_ID == 89
		SAVESTR:CHARA = 에반젤린
	ELSEIF NAME_ID == 90
		SAVESTR:CHARA = 에밀리아
	ELSEIF NAME_ID == 91
		SAVESTR:CHARA = 엘리제
	ELSEIF NAME_ID == 92
		SAVESTR:CHARA = 엘레오노르
	ELSEIF NAME_ID == 93
		SAVESTR:CHARA = 에델가르트
	ELSEIF NAME_ID == 94
		SAVESTR:CHARA = 오필리아
	ELSEIF NAME_ID == 95
		SAVESTR:CHARA = 카논
	ELSEIF NAME_ID == 96
		SAVESTR:CHARA = 사라
	ELSEIF NAME_ID == 97
		SAVESTR:CHARA = 시안
	ELSEIF NAME_ID == 98
		SAVESTR:CHARA = 지지
	ELSEIF NAME_ID == 99
		SAVESTR:CHARA = 지젤
	ELSEIF NAME_ID == 100
		SAVESTR:CHARA = 샤논
	ELSEIF NAME_ID == 101
		SAVESTR:CHARA = 샤마라
	ELSEIF NAME_ID == 102
		SAVESTR:CHARA = 샤론
	ELSEIF NAME_ID == 103
		SAVESTR:CHARA = 쥬느뵈브
	ELSEIF NAME_ID == 104
		SAVESTR:CHARA = 실비
	ELSEIF NAME_ID == 105
		SAVESTR:CHARA = 실비아
	ELSEIF NAME_ID == 106
		SAVESTR:CHARA = 세실
	ELSEIF NAME_ID == 107
		SAVESTR:CHARA = 셀마
	ELSEIF NAME_ID == 108
		SAVESTR:CHARA = 체칠리아
	ELSEIF NAME_ID == 109
		SAVESTR:CHARA = 티아
	ELSEIF NAME_ID == 110
		SAVESTR:CHARA = 디트린데
	ELSEIF NAME_ID == 111
		SAVESTR:CHARA = 노엘
	ELSEIF NAME_ID == 112
		SAVESTR:CHARA = 파티마
	ELSEIF NAME_ID == 113
		SAVESTR:CHARA = 브랑슈
	ELSEIF NAME_ID == 114
		SAVESTR:CHARA = 프리실라
	ELSEIF NAME_ID == 115
		SAVESTR:CHARA = 프림로즈
	ELSEIF NAME_ID == 116
		SAVESTR:CHARA = 플르르
	ELSEIF NAME_ID == 117
		SAVESTR:CHARA = 플로란스
	ELSEIF NAME_ID == 118
		SAVESTR:CHARA = 베릴
	ELSEIF NAME_ID == 119
		SAVESTR:CHARA = 헤이즐
	ELSEIF NAME_ID == 120
		SAVESTR:CHARA = 마샤
	ELSEIF NAME_ID == 121
		SAVESTR:CHARA = 뮤리엘
	ELSEIF NAME_ID == 122
		SAVESTR:CHARA = 미샤
	ELSEIF NAME_ID == 123
		SAVESTR:CHARA = 미리야
	ELSEIF NAME_ID == 124
		SAVESTR:CHARA = 메이
	ELSEIF NAME_ID == 125
		SAVESTR:CHARA = 메르비나
	ELSEIF NAME_ID == 126
		SAVESTR:CHARA = 멜로디
	ELSEIF NAME_ID == 127
		SAVESTR:CHARA = 유니스
	ELSEIF NAME_ID == 128
		SAVESTR:CHARA = 유페미아
	ELSEIF NAME_ID == 129
		SAVESTR:CHARA = 라티샤
	ELSEIF NAME_ID == 130
		SAVESTR:CHARA = 라라
	ELSEIF NAME_ID == 131
		SAVESTR:CHARA = 리아
	ELSEIF NAME_ID == 132
		SAVESTR:CHARA = 류크레이스
	ELSEIF NAME_ID == 133
		SAVESTR:CHARA = 류시엔느
	ELSEIF NAME_ID == 134
		SAVESTR:CHARA = 류크레이샤
	ELSEIF NAME_ID == 135
		SAVESTR:CHARA = 루실
	ELSEIF NAME_ID == 136
		SAVESTR:CHARA = 루나
	ELSEIF NAME_ID == 137
		SAVESTR:CHARA = 루루
	ELSEIF NAME_ID == 138
		SAVESTR:CHARA = 레이라
	ELSEIF NAME_ID == 139
		SAVESTR:CHARA = 레티샤
	ELSEIF NAME_ID == 140
		SAVESTR:CHARA = 로자린드
	ELSEIF NAME_ID == 141
		SAVESTR:CHARA = 로자리아
	ELSEIF NAME_ID == 142
		SAVESTR:CHARA = 로렛타

;和名
	ELSEIF NAME_ID == 200
		SAVESTR:CHARA = 사쿠라
	ELSEIF NAME_ID == 201
		SAVESTR:CHARA = 하루카
	ELSEIF NAME_ID == 202
		SAVESTR:CHARA = 카스미
	ELSEIF NAME_ID == 203
		SAVESTR:CHARA = 히나
	ELSEIF NAME_ID == 204
		SAVESTR:CHARA = 아오이
	ELSEIF NAME_ID == 205
		SAVESTR:CHARA = 미즈호
	ELSEIF NAME_ID == 206
		SAVESTR:CHARA = 아야
	ELSEIF NAME_ID == 207
		SAVESTR:CHARA = 토모에
	ELSEIF NAME_ID == 208
		SAVESTR:CHARA = 사츠키
	ELSEIF NAME_ID == 209
		SAVESTR:CHARA = 야요이
	ELSEIF NAME_ID == 210
		SAVESTR:CHARA = 나데시코
	ELSEIF NAME_ID == 211
		SAVESTR:CHARA = 카나미
	ELSEIF NAME_ID == 212
		SAVESTR:CHARA = 아야메
	ELSEIF NAME_ID == 213
		SAVESTR:CHARA = 유이
	ELSEIF NAME_ID == 214
		SAVESTR:CHARA = 린
	ELSEIF NAME_ID == 215
		SAVESTR:CHARA = 히나타
	ELSEIF NAME_ID == 216
		SAVESTR:CHARA = 아사기
	ELSEIF NAME_ID == 217
		SAVESTR:CHARA = 유키카제
	ELSEIF NAME_ID == 218
		SAVESTR:CHARA = 란
	ELSEIF NAME_ID == 219
		SAVESTR:CHARA = 히메
	ELSEIF NAME_ID == 220
		SAVESTR:CHARA = 아스카
	ELSEIF NAME_ID == 221
		SAVESTR:CHARA = 사기리
	ELSEIF NAME_ID == 222
		SAVESTR:CHARA = 미즈키
	ELSEIF NAME_ID == 223
		SAVESTR:CHARA = 호무라
	ELSEIF NAME_ID == 224
		SAVESTR:CHARA = 사야카
	ELSEIF NAME_ID == 225
		SAVESTR:CHARA = 마나카
	ELSEIF NAME_ID == 226
		SAVESTR:CHARA = 에리
	ELSEIF NAME_ID == 227
		SAVESTR:CHARA = 린코
	ELSEIF NAME_ID == 228
		SAVESTR:CHARA = 카나미
;20151225追加分
	ELSEIF NAME_ID == 229
		SAVESTR:CHARA = 아마네
	ELSEIF NAME_ID == 230
		SAVESTR:CHARA = 아야노
	ELSEIF NAME_ID == 231
		SAVESTR:CHARA = 이오리
	ELSEIF NAME_ID == 232
		SAVESTR:CHARA = 이자나미
	ELSEIF NAME_ID == 233
		SAVESTR:CHARA = 이자요이
	ELSEIF NAME_ID == 234
		SAVESTR:CHARA = 이로하
	ELSEIF NAME_ID == 235
		SAVESTR:CHARA = 우라라
	ELSEIF NAME_ID == 236
		SAVESTR:CHARA = 오우카
	ELSEIF NAME_ID == 237
		SAVESTR:CHARA = 오토하
	ELSEIF NAME_ID == 238
		SAVESTR:CHARA = 오토메
	ELSEIF NAME_ID == 239
		SAVESTR:CHARA = 오보로
	ELSEIF NAME_ID == 240
		SAVESTR:CHARA = 카에데
	ELSEIF NAME_ID == 241
		SAVESTR:CHARA = 카가리
	ELSEIF NAME_ID == 242
		SAVESTR:CHARA = 카가리비
	ELSEIF NAME_ID == 243
		SAVESTR:CHARA = 카구라
	ELSEIF NAME_ID == 244
		SAVESTR:CHARA = 카스가
	ELSEIF NAME_ID == 245
		SAVESTR:CHARA = 카나에
	ELSEIF NAME_ID == 246
		SAVESTR:CHARA = 카야
	ELSEIF NAME_ID == 247
		SAVESTR:CHARA = 칸나즈키
	ELSEIF NAME_ID == 248
		SAVESTR:CHARA = 키쿄우
	ELSEIF NAME_ID == 249
		SAVESTR:CHARA = 키사라기
	ELSEIF NAME_ID == 250
		SAVESTR:CHARA = 킷카
	ELSEIF NAME_ID == 251
		SAVESTR:CHARA = 쿠온
	ELSEIF NAME_ID == 252
		SAVESTR:CHARA = 쿠레나이
	ELSEIF NAME_ID == 253
		SAVESTR:CHARA = 쿠레하
	ELSEIF NAME_ID == 254
		SAVESTR:CHARA = 코코노
	ELSEIF NAME_ID == 255
		SAVESTR:CHARA = 코쵸우
	ELSEIF NAME_ID == 256
		SAVESTR:CHARA = 코츠네
	ELSEIF NAME_ID == 257
		SAVESTR:CHARA = 코츠노하
	ELSEIF NAME_ID == 258
		SAVESTR:CHARA = 코마치
	ELSEIF NAME_ID == 259
		SAVESTR:CHARA = 사쿠야
	ELSEIF NAME_ID == 260
		SAVESTR:CHARA = 사자나미
	ELSEIF NAME_ID == 261
		SAVESTR:CHARA = 사잔카
	ELSEIF NAME_ID == 262
		SAVESTR:CHARA = 사츠키
	ELSEIF NAME_ID == 263
		SAVESTR:CHARA = 사미다레
	ELSEIF NAME_ID == 264
		SAVESTR:CHARA = 사야
	ELSEIF NAME_ID == 265
		SAVESTR:CHARA = 시즈
	ELSEIF NAME_ID == 266
		SAVESTR:CHARA = 시즈쿠
	ELSEIF NAME_ID == 267
		SAVESTR:CHARA = 시노
	ELSEIF NAME_ID == 268
		SAVESTR:CHARA = 시라누이
	ELSEIF NAME_ID == 269
		SAVESTR:CHARA = 시로가네
	ELSEIF NAME_ID == 270
		SAVESTR:CHARA = 스즈
	ELSEIF NAME_ID == 271
		SAVESTR:CHARA = 스즈란
	ELSEIF NAME_ID == 272
		SAVESTR:CHARA = 세츠나
	ELSEIF NAME_ID == 273
		SAVESTR:CHARA = 츠쿠요미
	ELSEIF NAME_ID == 274
		SAVESTR:CHARA = 츠즈리
	ELSEIF NAME_ID == 275
		SAVESTR:CHARA = 츠바키
	ELSEIF NAME_ID == 276
		SAVESTR:CHARA = 츠라라
	ELSEIF NAME_ID == 277
		SAVESTR:CHARA = 토키와
	ELSEIF NAME_ID == 278
		SAVESTR:CHARA = 토와
	ELSEIF NAME_ID == 279
		SAVESTR:CHARA = 나카츠키
	ELSEIF NAME_ID == 280
		SAVESTR:CHARA = 나기사
	ELSEIF NAME_ID == 281
		SAVESTR:CHARA = 나나
	ELSEIF NAME_ID == 282
		SAVESTR:CHARA = 나나세
	ELSEIF NAME_ID == 283
		SAVESTR:CHARA = 나유타
	ELSEIF NAME_ID == 284
		SAVESTR:CHARA = 하즈키
	ELSEIF NAME_ID == 285
		SAVESTR:CHARA = 하나카가리
	ELSEIF NAME_ID == 286
		SAVESTR:CHARA = 하야테
	ELSEIF NAME_ID == 287
		SAVESTR:CHARA = 히스이
	ELSEIF NAME_ID == 288
		SAVESTR:CHARA = 히나기쿠
	ELSEIF NAME_ID == 289
		SAVESTR:CHARA = 히후미
	ELSEIF NAME_ID == 290
		SAVESTR:CHARA = 히마와리
	ELSEIF NAME_ID == 291
		SAVESTR:CHARA = 뱌쿠야
	ELSEIF NAME_ID == 292
		SAVESTR:CHARA = 히요리
	ELSEIF NAME_ID == 293
		SAVESTR:CHARA = 후즈키
	ELSEIF NAME_ID == 294
		SAVESTR:CHARA = 마코토
	ELSEIF NAME_ID == 295
		SAVESTR:CHARA = 마시로
	ELSEIF NAME_ID == 296
		SAVESTR:CHARA = 마츠카제
	ELSEIF NAME_ID == 297
		SAVESTR:CHARA = 마츠리
	ELSEIF NAME_ID == 298
		SAVESTR:CHARA = 마나즈루
	ELSEIF NAME_ID == 299
		SAVESTR:CHARA = 마유
	ELSEIF NAME_ID == 300
		SAVESTR:CHARA = 미우
	ELSEIF NAME_ID == 301
		SAVESTR:CHARA = 미카즈키
	ELSEIF NAME_ID == 302
		SAVESTR:CHARA = 미사오
	ELSEIF NAME_ID == 303
		SAVESTR:CHARA = 미소라
	ELSEIF NAME_ID == 304
		SAVESTR:CHARA = 미나즈키
	ELSEIF NAME_ID == 305
		SAVESTR:CHARA = 미야코
	ELSEIF NAME_ID == 306
		SAVESTR:CHARA = 미야비
	ELSEIF NAME_ID == 307
		SAVESTR:CHARA = 무츠키
	ELSEIF NAME_ID == 308
		SAVESTR:CHARA = 무라사키
	ELSEIF NAME_ID == 309
		SAVESTR:CHARA = 무라사메
	ELSEIF NAME_ID == 310
		SAVESTR:CHARA = 모미지
	ELSEIF NAME_ID == 311
		SAVESTR:CHARA = 야에
	ELSEIF NAME_ID == 312
		SAVESTR:CHARA = 야요이
	ELSEIF NAME_ID == 313
		SAVESTR:CHARA = 유우가오
	ELSEIF NAME_ID == 314
		SAVESTR:CHARA = 유우즈루
	ELSEIF NAME_ID == 315
		SAVESTR:CHARA = 유우나
	ELSEIF NAME_ID == 316
		SAVESTR:CHARA = 유카리
	ELSEIF NAME_ID == 317
		SAVESTR:CHARA = 유키지
	ELSEIF NAME_ID == 318
		SAVESTR:CHARA = 유즈
	ELSEIF NAME_ID == 319
		SAVESTR:CHARA = 유즈리하
	ELSEIF NAME_ID == 320
		SAVESTR:CHARA = 유노
	ELSEIF NAME_ID == 321
		SAVESTR:CHARA = 유메지
	ELSEIF NAME_ID == 322
		SAVESTR:CHARA = 요미
	ELSEIF NAME_ID == 323
		SAVESTR:CHARA = 릿카
	ELSEIF NAME_ID == 324
		SAVESTR:CHARA = 루리
	ELSEIF NAME_ID == 325
		SAVESTR:CHARA = 렌게
	ELSEIF NAME_ID == 326
		SAVESTR:CHARA = 와카나
	ELSEIF NAME_ID == 327
		SAVESTR:CHARA = 와카바
	ENDIF
ELSE
	SAVESTR:CHARA = 
	NAME_RAND_ID = NAME_ID % 1000000000
;랜덤 이름ver0.2
	IF NAME_ID > 2000000000
		WHILE NAME_RAND_ID > 1
			NAME_RAND_ID:1 = NAME_RAND_ID % 1000
;범용
			IF NAME_RAND_ID:1 == 200
				LOCALS = 아
			ELSEIF NAME_RAND_ID:1 == 201
				LOCALS = 아무
			ELSEIF NAME_RAND_ID:1 == 202
				LOCALS = 아르
			ELSEIF NAME_RAND_ID:1 == 203
				LOCALS = 안
			ELSEIF NAME_RAND_ID:1 == 204
				LOCALS = 이아
			ELSEIF NAME_RAND_ID:1 == 205
				LOCALS = 우르
			ELSEIF NAME_RAND_ID:1 == 206
				LOCALS = 에아
			ELSEIF NAME_RAND_ID:1 == 207
				LOCALS = 카르
			ELSEIF NAME_RAND_ID:1 == 208
				LOCALS = 시이
			ELSEIF NAME_RAND_ID:1 == 209
				LOCALS = 시아
			ELSEIF NAME_RAND_ID:1 == 210
				LOCALS = 스토
			ELSEIF NAME_RAND_ID:1 == 211
				LOCALS = 나루
			ELSEIF NAME_RAND_ID:1 == 212
				LOCALS = 네아
			ELSEIF NAME_RAND_ID:1 == 213
				LOCALS = 피르
			ELSEIF NAME_RAND_ID:1 == 214
				LOCALS = 포르
			ELSEIF NAME_RAND_ID:1 == 215
				LOCALS = 미스
			ELSEIF NAME_RAND_ID:1 == 216
				LOCALS = 메이
			ELSEIF NAME_RAND_ID:1 == 217
				LOCALS = 메티
			ELSEIF NAME_RAND_ID:1 == 218
				LOCALS = 라오
			ELSEIF NAME_RAND_ID:1 == 219
				LOCALS = 라나
			ELSEIF NAME_RAND_ID:1 == 220
				LOCALS = 뤼
			ELSEIF NAME_RAND_ID:1 == 221
				LOCALS = 리이
			ELSEIF NAME_RAND_ID:1 == 222
				LOCALS = 리즈
			ELSEIF NAME_RAND_ID:1 == 223
				LOCALS = 류
			ELSEIF NAME_RAND_ID:1 == 224
				LOCALS = 루
			ELSEIF NAME_RAND_ID:1 == 225
				LOCALS = 루크
			ELSEIF NAME_RAND_ID:1 == 226
				LOCALS = 레이
			ELSEIF NAME_RAND_ID:1 == 227
				LOCALS = 레세
			ELSEIF NAME_RAND_ID:1 == 228
				LOCALS = 레라
			ELSEIF NAME_RAND_ID:1 == 229
				LOCALS = 렌
;범용일음
			ELSEIF NAME_RAND_ID:1 == 300
				LOCALS = 베
			ELSEIF NAME_RAND_ID:1 == 301
				LOCALS = 시
			ELSEIF NAME_RAND_ID:1 == 302
				LOCALS = 쉐
			ELSEIF NAME_RAND_ID:1 == 303
				LOCALS = 샤
			ELSEIF NAME_RAND_ID:1 == 304
				LOCALS = 티
			ELSEIF NAME_RAND_ID:1 == 305
				LOCALS = 투
			ELSEIF NAME_RAND_ID:1 == 306
				LOCALS = 리
			ELSEIF NAME_RAND_ID:1 == 307
				LOCALS = 루
			ELSEIF NAME_RAND_ID:1 == 308
				LOCALS = 레
;종단
			ELSEIF NAME_RAND_ID:1 == 400
				LOCALS = 비아
			ELSEIF NAME_RAND_ID:1 == 400
				LOCALS = 온
			ELSEIF NAME_RAND_ID:1 == 402
				LOCALS = 키아
			ELSEIF NAME_RAND_ID:1 == 403
				LOCALS = 시아
			ELSEIF NAME_RAND_ID:1 == 404
				LOCALS = 타리아
			ELSEIF NAME_RAND_ID:1 == 405
				LOCALS = 탈리아
			ELSEIF NAME_RAND_ID:1 == 406
				LOCALS = 티아
			ELSEIF NAME_RAND_ID:1 == 407
				LOCALS = 디아
			ELSEIF NAME_RAND_ID:1 == 408
				LOCALS = 티스
			ELSEIF NAME_RAND_ID:1 == 409
				LOCALS = 니아
			ELSEIF NAME_RAND_ID:1 == 410
				LOCALS = 파
			ELSEIF NAME_RAND_ID:1 == 411
				LOCALS = 피아
			ELSEIF NAME_RAND_ID:1 == 412
				LOCALS = 플라
			ELSEIF NAME_RAND_ID:1 == 413
				LOCALS = 미아
			ELSEIF NAME_RAND_ID:1 == 414
				LOCALS = 리아
			ELSEIF NAME_RAND_ID:1 == 415
				LOCALS = 리카
			ELSEIF NAME_RAND_ID:1 == 416
				LOCALS = 리스
			ELSEIF NAME_RAND_ID:1 == 417
				LOCALS = 리제
			ELSEIF NAME_RAND_ID:1 == 418
				LOCALS = 리마
			ELSEIF NAME_RAND_ID:1 == 419
				LOCALS = 릴
			ELSEIF NAME_RAND_ID:1 == 420
				LOCALS = 즈
			ELSEIF NAME_RAND_ID:1 == 421
				LOCALS = 제
			ELSEIF NAME_RAND_ID:1 == 422
				LOCALS = 나
			ELSEIF NAME_RAND_ID:1 == 423
				LOCALS = 파
			ELSEIF NAME_RAND_ID:1 == 424
				LOCALS = 마
			ELSEIF NAME_RAND_ID:1 == 425
				LOCALS = 라
			ELSEIF NAME_RAND_ID:1 == 426
				LOCALS = 라
;終端一音
			ELSEIF NAME_RAND_ID:1 == 500
				LOCALS = ー
			ELSEIF NAME_RAND_ID:1 == 501
				LOCALS = 헨
;사용하지 않음
			ELSEIF NAME_RAND_ID:1 == 900
				LOCALS = 산
			ELSEIF NAME_RAND_ID:1 == 901
				LOCALS = 시프
			ELSEIF NAME_RAND_ID:1 == 902
				LOCALS = 소라
			ELSEIF NAME_RAND_ID:1 == 903
				LOCALS = 미로

			ENDIF
			STRLENS LOCALS
			SUBSTRING LOCALS, 0, 1
			IF LOCALS:1 == RESULTS && (LOCALS:1 == "아" || LOCALS:1 == "이" || LOCALS:1 == "우" || LOCALS:1 == "에" || LOCALS:1 == "오" || LOCALS:1 == "헨" || LOCALS:1 == "ー")
				SUBSTRING LOCALS, 2, RESULT - 1
				LOCALS = %RESULTS%
			ENDIF
			IF RESULTS == "ッ" && LOCALS:1 == "ー"
				STRLENS SAVESTR:CHARA
				SUBSTRING SAVESTR:CHARA, 0, RESULT - 2
				SAVESTR:CHARA = %RESULTS%
			ENDIF
			SUBSTRING LOCALS, RESULT - 2, RESULT - 1
			LOCALS:1 = %RESULTS%
			SAVESTR:CHARA = %SAVESTR:CHARA%%LOCALS%
			NAME_RAND_ID /= 1000
		WEND
;무작위 이름ver0.1
	ELSEIF NAME_ID > 1000000000
		WHILE NAME_RAND_ID > 1
			NAME_RAND_ID:1 = NAME_RAND_ID % 1000
			IF NAME_RAND_ID:1 == 100
				SAVESTR:CHARA = %SAVESTR:CHARA%아
			ELSEIF NAME_RAND_ID:1 == 101
				SAVESTR:CHARA = %SAVESTR:CHARA%아무
			ELSEIF NAME_RAND_ID:1 == 102
				SAVESTR:CHARA = %SAVESTR:CHARA%아르
			ELSEIF NAME_RAND_ID:1 == 103
				SAVESTR:CHARA = %SAVESTR:CHARA%안
			ELSEIF NAME_RAND_ID:1 == 104
				SAVESTR:CHARA = %SAVESTR:CHARA%이아
			ELSEIF NAME_RAND_ID:1 == 105
				SAVESTR:CHARA = %SAVESTR:CHARA%베
			ELSEIF NAME_RAND_ID:1 == 106
				SAVESTR:CHARA = %SAVESTR:CHARA%우르
			ELSEIF NAME_RAND_ID:1 == 107
				SAVESTR:CHARA = %SAVESTR:CHARA%카르
			ELSEIF NAME_RAND_ID:1 == 108
				SAVESTR:CHARA = %SAVESTR:CHARA%산
			ELSEIF NAME_RAND_ID:1 == 109
				SAVESTR:CHARA = %SAVESTR:CHARA%시
			ELSEIF NAME_RAND_ID:1 == 110
				SAVESTR:CHARA = %SAVESTR:CHARA%시이
			ELSEIF NAME_RAND_ID:1 == 111
				SAVESTR:CHARA = %SAVESTR:CHARA%쉐
			ELSEIF NAME_RAND_ID:1 == 112
				SAVESTR:CHARA = %SAVESTR:CHARA%시프
			ELSEIF NAME_RAND_ID:1 == 113
				SAVESTR:CHARA = %SAVESTR:CHARA%샤
			ELSEIF NAME_RAND_ID:1 == 114
				SAVESTR:CHARA = %SAVESTR:CHARA%소라
			ELSEIF NAME_RAND_ID:1 == 115
				SAVESTR:CHARA = %SAVESTR:CHARA%티
			ELSEIF NAME_RAND_ID:1 == 116
				SAVESTR:CHARA = %SAVESTR:CHARA%투
			ELSEIF NAME_RAND_ID:1 == 117
				SAVESTR:CHARA = %SAVESTR:CHARA%네아
			ELSEIF NAME_RAND_ID:1 == 118
				SAVESTR:CHARA = %SAVESTR:CHARA%피르
			ELSEIF NAME_RAND_ID:1 == 119
				SAVESTR:CHARA = %SAVESTR:CHARA%포르
			ELSEIF NAME_RAND_ID:1 == 120
				SAVESTR:CHARA = %SAVESTR:CHARA%미로
			ELSEIF NAME_RAND_ID:1 == 121
				SAVESTR:CHARA = %SAVESTR:CHARA%리
			ELSEIF NAME_RAND_ID:1 == 122
				SAVESTR:CHARA = %SAVESTR:CHARA%뤼
			ELSEIF NAME_RAND_ID:1 == 123
				SAVESTR:CHARA = %SAVESTR:CHARA%리이
			ELSEIF NAME_RAND_ID:1 == 124
				SAVESTR:CHARA = %SAVESTR:CHARA%리즈
			ELSEIF NAME_RAND_ID:1 == 125
				SAVESTR:CHARA = %SAVESTR:CHARA%류
			ELSEIF NAME_RAND_ID:1 == 126
				SAVESTR:CHARA = %SAVESTR:CHARA%레이
			ELSEIF NAME_RAND_ID:1 == 127
				SAVESTR:CHARA = %SAVESTR:CHARA%레라
			ELSEIF NAME_RAND_ID:1 == 128
				SAVESTR:CHARA = %SAVESTR:CHARA%렌
			ELSEIF NAME_RAND_ID:1 == 200
				SAVESTR:CHARA = %SAVESTR:CHARA%ー
			ELSEIF NAME_RAND_ID:1 == 201
				SAVESTR:CHARA = %SAVESTR:CHARA%비아
			ELSEIF NAME_RAND_ID:1 == 202
				SAVESTR:CHARA = %SAVESTR:CHARA%시아
			ELSEIF NAME_RAND_ID:1 == 203
				SAVESTR:CHARA = %SAVESTR:CHARA%탈리아
			ELSEIF NAME_RAND_ID:1 == 204
				SAVESTR:CHARA = %SAVESTR:CHARA%티아
			ELSEIF NAME_RAND_ID:1 == 205
				SAVESTR:CHARA = %SAVESTR:CHARA%디아
			ELSEIF NAME_RAND_ID:1 == 206
				SAVESTR:CHARA = %SAVESTR:CHARA%니아
			ELSEIF NAME_RAND_ID:1 == 207
				SAVESTR:CHARA = %SAVESTR:CHARA%피아
			ELSEIF NAME_RAND_ID:1 == 208
				SAVESTR:CHARA = %SAVESTR:CHARA%미아
			ELSEIF NAME_RAND_ID:1 == 209
				SAVESTR:CHARA = %SAVESTR:CHARA%리아
			ELSEIF NAME_RAND_ID:1 == 210
				SAVESTR:CHARA = %SAVESTR:CHARA%리카
			ENDIF
			NAME_RAND_ID /= 1000
		WEND
	ENDIF
	LOCALS:1 = 
ENDIF

RETURN 0

@NAME_RESET
LOCAL = 0
REPEAT CHARANUM
	SIF LOCAL >= CHARANUM
		BREAK
	IF LOCAL >= 1
		LOCAL = COUNT
		CALL NAMING,LOCAL
	ENDIF
	LOCAL += 1 
REND

;---------------------------------------------------------
@SET_CHAR_CLOTH
;---------------------------------------------------------
;케릭터의 의상을 직업마다 결정

IF TALENT:A:200 && TALENT:A:122
	;オトコ戦士
	;チェインメイル
	R = 3
	;초기 장비：검
	CFLAG:A:550 = 40
ELSEIF TALENT:A:200
	;전사
	
	;生成名でランダムで中華風
	IF CFLAG:A:6 > 1000000000 && RAND:3 == 0
		;チャイナドレス
		R = 214
		IF RAND:2 == 0
			;初期装備：크레센트블레이드
			CFLAG:A:550 = 51
		ELSE
			;初期装備：너클
			CFLAG:A:550 = 52
		ENDIF
	ELSE
		
		IF RAND:6 == 0
			;レオタードアーマー
			R = 292
		ELSEIF RAND:5 == 0
			;ブレスト＆スカートアーマー
			R = 2
		ELSEIF RAND:4 == 0
			;チェインメイル
			R = 3
		ELSEIF RAND:3 == 0
			;レザー＆スカートアーマー
			R = 4
		ELSEIF RAND:2 == 0
			;ブレスト＆スパッツアーマー
			R = 108
		ELSE
			;ビキニアーマー
			R = 193
		ENDIF
		;초기 장비：검
		CFLAG:A:550 = 40
	ENDIF
ELSEIF TALENT:A:201 && TALENT:A:122
	;オトコ魔術師
	;冒険服
	R = 103
	;목걸이 포함
	CFLAG:A:42 = 85
	;초기 장비：스태프
	CFLAG:A:550 = 41
ELSEIF TALENT:A:201
	;마술사
	IF RAND:3 == 0
		;スキン＆スカートアーマー
		R = 5
	ELSEIF RAND:2 == 0
		;タイツアーマー
		R = 251
	ELSE
		;冒険服
		R = 103
	ENDIF
	;목걸이 포함
	CFLAG:A:42 = 85
	;초기 장비：스태프
	CFLAG:A:550 = 41
ELSEIF TALENT:A:202 && TALENT:A:122
	;オトコ神官
	;神官服
	R = 207
	;초기 장비：메이스
	CFLAG:A:550 = 46
ELSEIF TALENT:A:202
	;신관
	IF RAND:3 == 0
		;スキン＆スカートアーマー
		R = 5
	ELSEIF RAND:2 == 0
		;タイツアーマー
		R = 251
	ELSE
		;神官服
		R = 207
	ENDIF
	;초기 장비：메이스
	CFLAG:A:550 = 46
ELSEIF TALENT:A:203 && TALENT:A:122
	;オトコ盗賊
	;冒険服
	R = 103
	;초기 장비：단검
	CFLAG:A:550 = 43
ELSEIF TALENT:A:203
	;도적
	IF RAND:3 == 0
		;スキン＆スカートアーマー
		R = 5
	ELSEIF RAND:2 == 0
		;タイツアーマー
		R = 251
	ELSE
		;冒険服
		R = 103
	ENDIF
	;초기 장비：단검
	CFLAG:A:550 = 43
ELSEIF TALENT:A:205 && TALENT:A:122
	;オトコ騎士
	;騎士鎧
	R = 105
	;초기 장비：검
	CFLAG:A:550 = 40
ELSEIF TALENT:A:205
	;기사
	IF RAND:3 == 0
		;騎士鎧
		R = 105
	ELSEIF RAND:2 == 0
		;キュイラス＆スカート
		R = 6
	ELSE
		;キュイラス＆かぼちゃパンツ
		R = 111
	ENDIF
	;초기 장비：검
	CFLAG:A:550 = 40
ELSEIF TALENT:A:206 && TALENT:A:122
	;オトコ巫女
	;巫女装束
	R = 104
	;초기 장비：스태프
	CFLAG:A:550 = 41
ELSEIF TALENT:A:206
	;무녀
	;巫女装束
	R = 104
	;초기 장비：스태프
	CFLAG:A:550 = 41
ELSEIF TALENT:A:207 && TALENT:A:122
	;オトコ忍者
	;忍者装束
	R = 110
	;초기 장비：수리검
	CFLAG:A:550 = 44
ELSEIF TALENT:A:207
	;닌자
	;忍者装束
	R = 110
	;초기 장비：수리검
	CFLAG:A:550 = 44
ELSEIF TALENT:A:208 && TALENT:A:122
	;オトコ弓師
	;冒険服
	R = 103
	;초기 장비：화살
	CFLAG:A:550 = 45
ELSEIF TALENT:A:208
	;궁사
	IF RAND:3 == 0
		;スキン＆スカートアーマー
		R = 5
	ELSEIF RAND:2 == 0
		;タイツアーマー
		R = 251
	ELSE
		;冒険服
		R = 103
	ENDIF
	;초기 장비：화살
	CFLAG:A:550 = 45
ELSE
	R = 1
	;초기 장비：채찍
	CFLAG:A:550 = 42
ENDIF

;초기장비 접두어
CFLAG:A:550 += RAND:10 * 100000

CFLAG:A:41 = R
CFLAG:A:45 = 0
CFLAG:A:46 = 0
R = 0
X = TARGET
TARGET = A
CALL WEARING_CLOTH_ABLE
TARGET = X
;근시에는 안경이 달림
SIF TALENT:A:48 == 1
	CFLAG:A:42 = 83

;ドワーフとホビットの処理はLOOK.ERBの種族決定時（$RACE）に移動



RETURN 0

;---------------------------------------------------------
@CHAR_MAKE_INPORT, ARG:0 = 1
#DIM CHARA, 1
#DIM LIST, 100
#DIMS NUMS, 10
#LOCALSIZE 4
;---------------------------------------------------------
;다른 용사의 등장 설정
SIF FLAG:76 <= 0
	RETURN 0
;引数ARG:0に応じて生成に成功するか判定
;引数を指定しない場合はRAND(1)=0で必ず成功
SIF RAND(ARG:0) != 0
	RETURN 0
VARSET LIST, -100
LOCAL:1 = 0

FOR LOCAL, 0, 100
	SIF GLOBALS:LOCAL == ""
		CONTINUE
	SPLIT GLOBALS:(LOCAL:1), "_", RESULTS
	SIF TOINT(RESULTS:2) > FLAG:76
		CONTINUE
	FOR LOCAL:2, 0, CHARANUM
		LOCAL:3 = 0
		IF CFLAG:(LOCAL:2):190 == TOINT(RESULTS)
			LOCAL:3 = 1
			BREAK
		ENDIF
	NEXT
	SIF LOCAL:3
		CONTINUE
	;동일한 케릭터 번호를 가지고 있는 경우 튕김.
	SIF GETCHARA(TOINT(RESULTS:1), 0) >= 0
		CONTINUE
	LIST:(LOCAL:1) = LOCAL
	LOCAL:1++
NEXT

;작성 가능한 용사가 없다
SIF !LOCAL:1
	RETURN 0

;케릭터 확정
SPLIT GLOBALS:(LIST:(RAND:(LOCAL:1))), "_", LOCALS
;공백 케릭터를 작성
ADDVOIDCHARA
CHARA = CHARANUM - 1
;케릭터 번호
NO:CHARA = TOINT(LOCALS:1)
;이름의 설정
SAVESTR:CHARA = %LOCALS:3%
CALLNAME:CHARA = CSVCALLNAME(NO:CHARA, 0)
NAME:CHARA = CALLNAME(NO:CHARA, 0)
;ABL
SPLIT LOCALS:4, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	ABL:CHARA:TOINT(NUMS) = TOINT(NUMS:1)
NEXT
SPLIT LOCALS:5, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	BASE:CHARA:TOINT(NUMS) = TOINT(NUMS:1)
NEXT
SPLIT LOCALS:6, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	MAXBASE:CHARA:TOINT(NUMS) = TOINT(NUMS:1)
NEXT
SPLIT LOCALS:7, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	CFLAG:CHARA:TOINT(NUMS) = TOINT(NUMS:1)
NEXT
SPLIT LOCALS:8, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	EXP:CHARA:TOINT(NUMS) = TOINT(NUMS:1)
NEXT
SPLIT LOCALS:9, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	EQUIP:CHARA:TOINT(NUMS) = TOINT(NUMS:1)
NEXT
SPLIT LOCALS:10, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	JUEL:CHARA:TOINT(NUMS) = TOINT(NUMS:1)
NEXT
SPLIT LOCALS:11, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	TALENT:CHARA:TOINT(NUMS) = TOINT(NUMS:1)
NEXT
SPLIT LOCALS:12, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	MARK:CHARA:TOINT(NUMS) = TOINT(NUMS:1)
NEXT
SPLIT LOCALS:13, "/", RESULTS
FOR LOCAL, 0, RESULT-1
	SPLIT RESULTS:LOCAL, ",", NUMS
	CSTR:CHARA:TOINT(NUMS) = %NUMS:1%
NEXT

;침입계층・침공도・침공 중 설정
CFLAG:CHARA:501 = 1
CFLAG:CHARA:502 = 0
CFLAG:CHARA:1 = 2
IF FLAG:77
	;레벨・경험치설정
	CFLAG:CHARA:9 = 1
	EXP:CHARA:80 = 0
	IF FLAG:60 > 0
		REPEAT FLAG:60
			CALL ST_UP, CHARA
		REND
	ENDIF
ENDIF
BASE:CHARA:0 = MAXBASE:CHARA:0
BASE:CHARA:1 = MAXBASE:CHARA:1
;一応
RETURN CHARA

@RAND_CHARA_MAKE
#DIM CHARA, 1
#DIM ID_OF_NEWCHARA
#DIM TEMP
#DIM HAIRCOLOR
#DIM CHARACTER
$INPUT_LOOP_11
;キャラのNOを選定
CHARA = RAND(1, 17)
;GETCHARA(キャラ番号, SPフラグ)でキャラが存在しない場合は-1
;存在する場合はキャラ登録番号が帰る
IF GETCHARA(CHARA, 0) == -1
	;異国の勇者の判定をする
	CALL CHAR_MAKE_INPORT
	IF RESULT == 0
		;異国の勇者ではない
		LOCAL:0 = 0
		ADDCHARA CHARA
		A = CHARANUM - 1
		ID_OF_NEWCHARA = CHARANUM - 1
		;性格
		IF CHARACTER != -1
			CALL SET_CHARASTERISTIC(ID_OF_NEWCHARA, CHARACTER)
		ENDIF
		;髪色
		IF HAIRCOLOR > 0
			CALL SET_HAIRCOLOR(ID_OF_NEWCHARA, HAIRCOLOR)
		ENDIF
		
		
		$INPUT_LOOP_12
		PRINTL 확실히， 눈앞의 용사는 이렇게 보인다…
		PRINT [0] 인상 ： 
		;性格表示、未定義ならランダムに設定
		CALL SHOW_CHARASTERISTIC(ID_OF_NEWCHARA)
		IF RESULT == -1
			CALL SET_RANDOM_CHARASTERISTIC(ID_OF_NEWCHARA)
			CALL SHOW_CHARASTERISTIC(ID_OF_NEWCHARA)
		ENDIF
		CHARACTER = RESULT
		PRINTL
		
		PRINT [1] 머리색 ： 
		;髪色表示、未定義ならランダムに設定
		CALL SHOW_HAIRCOLOR(ID_OF_NEWCHARA)
		IF RESULT == 0
			CALL SET_RANDOM_HAIRCOLOR(ID_OF_NEWCHARA)
			CALL SHOW_HAIRCOLOR(ID_OF_NEWCHARA)
		ENDIF
		HAIRCOLOR = RESULT
		PRINTL
		
		DRAWLINE
		PRINTL [100] …여자，였을것이다
		
		INPUT
		
		IF RESULT == 0
			;性格変更
			PRINTL 어떤 태도였지…
			CALL CHOOSE_CHARASTERISTIC(ID_OF_NEWCHARA)
			GOTO INPUT_LOOP_12
			
		ELSEIF RESULT == 1
			;髪色変更
			PRINTL 머리색은 무슨 색이였지…
			CALL CHOOSE_HAIRCOLOR(ID_OF_NEWCHARA)
			GOTO INPUT_LOOP_12
			
		ELSEIF RESULT == 100
			;進む
		ELSE
			GOTO INPUT_LOOP_12
		ENDIF
		
		;派遣奴隷フラグ（レベル1生成）
		FLAG:402 = 1
		CALL CHAR_MAKE,999,999
		
	ELSE
		;異国の勇者である
		LOCAL:0 = 1
	ENDIF
	
	;キャラのステータス表示
	CALL SHOW_CHARA_INFO, ID_OF_NEWCHARA
	
	PRINTL 봉인을 푼 용사는 이런 여자였나…？
	PRINTL [1] 달랐던 생각이 든다…  [2] 확실히 그렇다…
	INPUT
	IF RESULT == 1
		CALL PARTY_CHAR_DEL, (CHARANUM - 1)
		DELCHARA (CHARANUM - 1)
		CALL NAME_RESET
		GOTO INPUT_LOOP_11
	ELSE
	PRINTL *****************************************
	SIF LOCAL:0
		PRINT 이국의
	PRINT 모험가
	PRINTS SAVESTR:(CHARANUM - 1)
	PRINTL 를 지하 감옥에 유폐했습니다! 
	PRINTL *****************************************
	CFLAG:(CHARANUM - 1):1 = 0
	;使ったフラグを戻しておく
	FLAG:402 = 0
	WAIT
	ENDIF
ELSE
	PRINTL 마왕에 대한 공포 때문인지 용사는 나타나지 않았다
	WAIT
	RETURN 0
ENDIF

RETURN (CHARANUM - 1)

